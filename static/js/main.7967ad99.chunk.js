(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/banner.56eac4d3.jpg"},35:function(e,t,n){e.exports=n.p+"static/media/sorry.f7def4e0.gif"},36:function(e,t,n){e.exports=n.p+"static/media/back.21e770cf.gif"},39:function(e,t,n){e.exports=n(64)},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},55:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(16),c=n.n(o),s=n(15),l=n(11),i=n(67),u=n(68),m=n(66),p=(n(48),n(50),n(5)),h=n(6),d=n(8),f=n(7),E=n(9),g=n(69),v=n(3),y=n(4),b=n(65),O=n(31),C=n.n(O),S=(n(52),function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:C.a,alt:"Banner"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-box"},r.a.createElement("h1",null,r.a.createElement(b.a,{to:"/"},"TechnoBlog")),r.a.createElement("p",null,"What's up ?"))))}}]),t}(a.Component)),j=n(17),k=n.n(j),N=(n(55),"http://localhost:3001"),T=localStorage.token;T||(T=localStorage.token=Math.random().toString(36).substr(-8));var w={Accept:"application/json","Content-Type":"application/json",Authorization:T},D=function(){return fetch("".concat(N,"/posts"),{headers:w}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},I=function(e){return fetch("".concat(N,"/").concat(e,"/posts"),{headers:w}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},M=function(e){return fetch("".concat(N,"/posts/").concat(e),{headers:w}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},A=function(e){return fetch("".concat(N,"/posts/").concat(e),{headers:w,method:"POST",body:JSON.stringify({option:"upVote"})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},P=function(e){return fetch("".concat(N,"/posts/").concat(e),{headers:w,method:"POST",body:JSON.stringify({option:"downVote"})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},V=function(){return fetch("".concat(N,"/categories"),{headers:w}).then(function(e){return e.json()}).then(function(e){return e.categories}).catch(function(e){return console.log(e)})},x=function(e){return fetch("".concat(N,"/posts"),{headers:w,method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},U=function(e){return fetch("".concat(N,"/posts/").concat(e.id),{headers:w,method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},_=function(e){return fetch("".concat(N,"/posts/").concat(e,"/comments"),{headers:w}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},J=function(e){return fetch("".concat(N,"/comments"),{headers:w,method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},Y=function(e){return fetch("".concat(N,"/comments/").concat(e),{headers:w,method:"POST",body:JSON.stringify({option:"upVote"})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},H=function(e){return fetch("".concat(N,"/comments/").concat(e),{headers:w,method:"POST",body:JSON.stringify({option:"downVote"})}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log(e)})},R="LIST_POSTS",L="INCREASE_VOTES",z="DECREASE_VOTES";function B(e,t,n,a){return{type:R,posts:e,sortType:t,sortOrder:n,searchTerm:a}}function q(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(r){return null===a||""===a?D().then(function(a){r(B(a,e,t,n))}):I(a).then(function(a){r(B(a,e,t,n))})}}function W(e){return function(t){return A(e.id).then(function(e){t(function(e){return{type:L,post:e}}(e))})}}function F(e){return function(t){return P(e.id).then(function(e){t(function(e){return{type:z,post:e}}(e))})}}var G=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"goToContent",value:function(e,t){this.props.history.push("/".concat(e,"/").concat(t))}},{key:"increaseVotes",value:function(e){this.props.dispatch(W(e))}},{key:"decreaseVotes",value:function(e){this.props.dispatch(F(e))}},{key:"render",value:function(){var e=this,t=this.props.post,n=t.title,a=t.author,o=t.body,c=t.category,s=t.commentCount,l=t.timestamp,i=t.voteScore,u=t.id;return r.a.createElement(v.f,{className:"post-item"},r.a.createElement(v.g,null,r.a.createElement(v.i,null,r.a.createElement(b.a,{to:"/".concat(c,"/").concat(u)},n)," - ",r.a.createElement(v.a,{href:"#",color:"light"},c)),r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"publish-info"},r.a.createElement(y.l,null),"\xa0",a,"\xa0|\xa0",k()(l).format("ddd, MMMM Do YYYY")),r.a.createElement("div",{className:"comment-count"},r.a.createElement(y.h,null),"\xa0\xa0",s)),o,r.a.createElement("br",null)),r.a.createElement(v.h,{className:"footer"},r.a.createElement("div",{className:"vote-score-container"},r.a.createElement("span",{onClick:function(){return e.decreaseVotes(e.props.post)}},r.a.createElement(y.i,null)),"\xa0",i,"\xa0",r.a.createElement("span",{onClick:function(){return e.increaseVotes(e.props.post)}},r.a.createElement(y.j,null))),r.a.createElement(v.d,{size:"sm",color:"primary",onClick:function(){return e.goToContent(c,u)}},"Read more")))}}]),t}(a.Component),K=Object(g.a)(Object(l.b)()(G)),Q=n(35),X=n.n(Q),Z=(n(58),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={sortType:"DATE",sortOrder:"DESC",search:""},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadPostList()}},{key:"componentDidUpdate",value:function(e){this.props.category!==e.category&&this.loadPostList()}},{key:"sortPostsByDate",value:function(){var e=this.state,t=e.sortOrder,n=e.search,a=this.props.category;this.setState({sortType:"DATE"}),this.props.dispatch(q("DATE",t,n,a))}},{key:"sortPostsByVotes",value:function(){var e=this.state,t=e.sortOrder,n=e.search,a=this.props.category;this.setState({sortType:"VOTES"}),this.props.dispatch(q("VOTES",t,n,a))}},{key:"toggleSortOrder",value:function(){var e=this.state,t=e.sortType,n=e.search,a=this.props.category,r="ASC"===this.state.sortOrder?"DESC":"ASC";this.setState({sortOrder:r}),this.props.dispatch(q(t,r,n,a))}},{key:"handleSearchChange",value:function(e){var t=this.state,n=t.sortType,a=t.sortOrder,r=this.props.category,o=e.target.value;this.setState({search:o}),this.props.dispatch(q(n,a,o,r))}},{key:"loadPostList",value:function(){var e=this.state,t=e.sortType,n=e.sortOrder,a=e.search,r=this.props.category;this.props.dispatch(q(t,n,a,r))}},{key:"render",value:function(){var e=this,t=this.state,n=t.sortType,a=t.sortOrder,o=t.search,c=this.props.posts;return r.a.createElement("div",{className:"post-list"},r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",null,"Sort by\xa0",r.a.createElement(v.e,{size:"sm"},r.a.createElement(v.d,{outline:!0,color:"primary",onClick:function(){return e.sortPostsByDate()},active:"DATE"===n},"Date"),r.a.createElement(v.d,{outline:!0,color:"primary",onClick:function(){return e.sortPostsByVotes()},active:"VOTES"===n},"Votes")),"\xa0","DESC"===a&&r.a.createElement(y.n,{className:"sort-icon sort-down",onClick:function(){return e.toggleSortOrder()}}),"ASC"===a&&r.a.createElement(y.o,{className:"sort-icon sort-up",onClick:function(){return e.toggleSortOrder()}})),r.a.createElement("div",null,r.a.createElement(v.m,{size:"sm"},r.a.createElement(v.l,{placeholder:"Search...",value:o,onChange:this.handleSearchChange.bind(this)})))),r.a.createElement("br",null),!0===c.loading&&r.a.createElement("div",null,"Waiting..."),!1===c.loading&&0===c.list.length&&r.a.createElement("div",null,"Sorry. No posts in this category yet",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{src:X.a,alt:"Sorry"})),!1===c.loading&&c.list.map(function(e){return r.a.createElement(K,{post:e,key:e.id})}))}}]),t}(a.Component));var $=Object(l.b)(function(e,t){return{posts:e.posts}})(Z),ee=(n(60),"SET_USER");function te(e){return function(t){return t(function(e){return{type:ee,user:e}}(e))}}var ne=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={modalOpened:!1,name:""},n.toggleModal=function(){n.setState({modalOpened:!n.state.modalOpened})},n.handleChange=function(e){n.setState({name:e})},n.saveUserData=function(){var e={id:n.props.user.id,name:n.state.name};n.props.dispatch(te(e)),localStorage.setItem("user",JSON.stringify(e)),n.toggleModal()},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("user")||null;if(null===(e=JSON.parse(e))){var t={id:Math.random().toString(36).substr(-8),name:"Udacity Student"};localStorage.setItem("user",JSON.stringify(t)),e=t}this.props.dispatch(te(e)),this.handleChange(e.name)}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",{className:"user-interface"},r.a.createElement(y.k,null)," Hi, ",t.name," ",r.a.createElement("span",{className:"edit-user",onClick:this.toggleModal},r.a.createElement(y.f,null)),r.a.createElement("hr",null),r.a.createElement(v.q,{isOpen:this.state.modalOpened,toggle:this.toggleModal},r.a.createElement(v.t,{toggle:this.toggleModal},"User data"),r.a.createElement(v.r,null,r.a.createElement(v.j,null,r.a.createElement(v.k,null,r.a.createElement(v.n,{for:"username"},"Name"),r.a.createElement(v.l,{type:"text",name:"username",id:"username",onChange:function(t){return e.handleChange(t.target.value)},value:this.state.name})))),r.a.createElement(v.s,null,r.a.createElement(v.d,{color:"default",onClick:this.toggleModal},r.a.createElement(y.p,null)," Cancel"),r.a.createElement(v.d,{color:"success",onClick:this.saveUserData},r.a.createElement(y.m,null)," Save"))))}}]),t}(a.Component);var ae=Object(l.b)(function(e,t){return{user:e.user}})(ne),re="LIST_CATEGORIES";function oe(){return function(e){return V().then(function(t){e(function(e){return{type:re,categories:e}}(t))})}}var ce=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(oe())}},{key:"goToContent",value:function(e,t){e.preventDefault(),this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.categories,a=t.selected;return r.a.createElement("div",{className:"categories"},r.a.createElement(y.c,null)," Categories ",r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(v.o,null,r.a.createElement(v.p,{tag:"a",href:"/",active:void 0===a,onClick:function(t){return e.goToContent(t,"/")},key:"all"},"ALL"),n.list.map(function(t){return r.a.createElement(v.p,{tag:"a",active:a===t.path,href:"/"+t.path,onClick:function(n){return e.goToContent(n,"/"+t.path)},key:t.path},t.name.toUpperCase())})))}}]),t}(a.Component);var se=Object(g.a)(Object(l.b)(function(e,t){return{categories:e.categories}})(ce)),le=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"goToNewPost",value:function(e){e.preventDefault(),this.props.history.push("/new-post")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"home"},r.a.createElement(S,null),r.a.createElement("div",{className:"container"},r.a.createElement(v.b,{tag:"nav",listTag:"div"},r.a.createElement(v.c,{tag:"a",href:"/"},"Home")),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement($,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(ae,null),r.a.createElement(se,null),r.a.createElement("hr",null),r.a.createElement(v.d,{color:"warning",size:"sm",block:!0,onClick:function(t){return e.goToNewPost(t)}},r.a.createElement(y.g,null)," New Post"))))))}}]),t}(a.Component),ie=Object(g.a)(le),ue=n(36),me=n.n(ue),pe=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"goToNewPost",value:function(e){e.preventDefault(),this.props.history.push("/new-post")}},{key:"render",value:function(){var e=this,t=this.props,n=t.category,a=t.validCategory,o=n.name.charAt(0).toUpperCase()+n.name.slice(1);return r.a.createElement("div",{className:"category"},r.a.createElement(S,null),r.a.createElement("div",{className:"container"},r.a.createElement(v.b,{tag:"nav",listTag:"div"},r.a.createElement(v.c,{tag:"a",href:"/"},"Home"),r.a.createElement(v.c,{active:!0},o)),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},!0===a?r.a.createElement($,{category:n.name}):r.a.createElement("div",null,"Ooops! Invalid category ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("img",{src:me.a,alt:"Back"}))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(ae,null),r.a.createElement(se,{selected:n.name}),r.a.createElement("hr",null),r.a.createElement(v.d,{color:"warning",size:"sm",block:!0,onClick:function(t){return e.goToNewPost(t)}},r.a.createElement(y.g,null)," New Post"))))))}}]),t}(a.Component);var he=Object(g.a)(Object(l.b)(function(e,t){var n=e.categories,a=t.match.params.categoryName,r=t.location.pathname,o={name:""},c=!0;return!1===n.loading&&void 0===(o=(o=n.list.filter(function(e){return e.path===a}))[0])&&(o={name:"Oh No!"},c=!1),{categories:n,category:o,pathname:r,validCategory:c}})(pe)),de="GET_POST",fe="EDIT_POST",Ee="ADD_POST",ge="INCREASE_VOTE",ve="DECREASE_VOTE";function ye(e){return function(t){return M(e).then(function(e){t(function(e){return{type:de,post:e}}(e))})}}function be(e){return function(t){return x(e).then(function(e){t(function(e){return{type:Ee,data:e}}(e))})}}function Oe(e){return function(t){return U(e).then(function(e){t(function(e){return{type:fe,data:e}}(e))})}}function Ce(e){return function(t){return A(e.id).then(function(e){t(function(e){return{type:ge,post:e}}(e))})}}function Se(e){return function(t){return P(e.id).then(function(e){t(function(e){return{type:ve,post:e}}(e))})}}var je=n(21),ke=(n(62),"GET_POST_COMMENTS"),Ne="INCREASE_COMMENT_VOTES",Te="DECREASE_COMMENT_VOTES",we="ADD_COMMENT";function De(e){return function(t){return _(e).then(function(e){t(function(e){return{type:ke,comments:e}}(e))})}}function Ie(e){return function(t){return Y(e.id).then(function(e){t(function(e){return{type:Ne,comment:e}}(e))})}}function Me(e){return function(t){return H(e.id).then(function(e){t(function(e){return{type:Te,comment:e}}(e))})}}function Ae(e){return function(t){return J(e).then(function(e){t(function(e){return{type:we,comment:e}}(e))})}}var Pe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={comment:""},n.handleInputChange=function(e,t){n.setState(Object(je.a)({},e,t))},n.onFormSubmit=function(e){e.preventDefault();var t=localStorage.getItem("user");t=JSON.parse(t);var a={id:Math.random().toString(36).substr(-8),timestamp:Date.now(),body:n.state.comment,author:t.name,parentId:n.props.postId};n.props.dispatch(Ae(a)),n.setState({comment:""})},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.postId;this.props.dispatch(De(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props.postId;t!==e.postId&&this.props.dispatch(De(t))}},{key:"increaseVotes",value:function(e){this.props.dispatch(Ie(e))}},{key:"decreaseVotes",value:function(e){this.props.dispatch(Me(e))}},{key:"render",value:function(){var e=this,t=this.props.comments;return r.a.createElement("div",{className:"comment-box"},r.a.createElement("h3",null,r.a.createElement(y.h,null)," Comments"),r.a.createElement(v.j,{onSubmit:this.onFormSubmit},r.a.createElement(v.k,{tag:"fieldset"},r.a.createElement(v.k,null,r.a.createElement(v.n,{for:"postComment"},"Post content"),r.a.createElement(v.l,{type:"textarea",maxLength:"500",required:!0,name:"postComment",id:"postComment",rows:4,onChange:function(t){return e.handleInputChange("comment",t.target.value)},"aria-multiline":"true",value:this.state.comment})),r.a.createElement(v.k,{check:!0,className:"float-right"},r.a.createElement(v.d,{color:"success"},r.a.createElement(y.e,null)," Comment")))),!1===t.loading&&t.list.map(function(t){return r.a.createElement("div",{key:t.id,className:"comment"},r.a.createElement("span",{className:"text-muted"},r.a.createElement(y.q,null)," ",t.author," at ",k()(t.timestamp).format("MMMM Do YYYY"))," ",r.a.createElement("br",null),t.body,r.a.createElement("hr",null),r.a.createElement("div",{className:"vote-score-container"},r.a.createElement("span",{onClick:function(){return e.decreaseVotes(t)}},r.a.createElement(y.a,null)),"\xa0",t.voteScore,"\xa0",r.a.createElement("span",{onClick:function(){return e.increaseVotes(t)}},r.a.createElement(y.b,null))))}))}}]),t}(a.Component);var Ve=Object(g.a)(Object(l.b)(function(e,t){return{comments:e.comments}})(Pe)),xe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={postId:null},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params.postId;this.props.dispatch(ye(e))}},{key:"goToHome",value:function(e){e.preventDefault(),this.props.history.push("/")}},{key:"goToRoute",value:function(e,t){e.preventDefault(),this.props.history.push("/".concat(t))}},{key:"increaseVotes",value:function(e){this.props.dispatch(Ce(e))}},{key:"decreaseVotes",value:function(e){this.props.dispatch(Se(e))}},{key:"render",value:function(){var e=this,t=this.props.post;return r.a.createElement("div",{className:"store-post"},r.a.createElement(S,null),r.a.createElement("div",{className:"container"},r.a.createElement(v.b,{tag:"nav",listTag:"div"},r.a.createElement(v.c,{tag:"a",href:"/"},"Home"),!1===t.loading&&r.a.createElement(v.c,{tag:"a",href:"#",onClick:function(n){return e.goToRoute(n,t.data.category)}},t.data.category.toUpperCase()),r.a.createElement(v.c,{active:!0},!1===t.loading&&t.data.title)),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},!1===t.loading&&r.a.createElement("div",null,r.a.createElement("h1",null,t.data.title),r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"publish-info"},r.a.createElement(y.l,null),"\xa0",t.data.author,"\xa0|\xa0",k()(t.data.timestamp).format("ddd, MMMM Do YYYY")),r.a.createElement("div",{className:"comment-count"},r.a.createElement(y.h,null),"\xa0\xa0",t.data.commentCount)),r.a.createElement("br",null),r.a.createElement("p",null,t.data.body),r.a.createElement("div",{className:"vote-score-container"},r.a.createElement("span",{onClick:function(){return e.decreaseVotes(t.data)}},r.a.createElement(y.i,null)),"\xa0",t.data.voteScore,"\xa0",r.a.createElement("span",{onClick:function(){return e.increaseVotes(t.data)}},r.a.createElement(y.j,null))),r.a.createElement("hr",null),r.a.createElement(Ve,{postId:t.data.id}))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(ae,null),r.a.createElement(se,{selected:this.props.match.params.categoryName}),r.a.createElement("hr",null),r.a.createElement(v.d,{color:"warning",size:"sm",block:!0,onClick:function(t){return e.goToHome(t)}},r.a.createElement(y.d,null)," Home"))))))}}]),t}(a.Component);var Ue=Object(g.a)(Object(l.b)(function(e,t){return{categories:e.categories,post:e.post}})(xe)),_e=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",category:"",content:""},n.handleInputChange=function(e,t){n.setState(Object(je.a)({},e,t))},n.onFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.title,r=t.category,o=t.content,c=n.props.postId,s=localStorage.getItem("user")||null;if(s=JSON.parse(s),void 0!==c){var l={id:c,title:a,body:o,category:r};n.props.dispatch(Oe(l))}else{var i={id:Math.random().toString(36).substr(-8),timestamp:Date.now(),title:a,body:o,author:s.name,category:r};n.props.dispatch(be(i))}n.props.history.push("/")},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.postId;void 0!==e&&this.props.dispatch(ye(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props.post;t!==e.post&&this.setState({title:t.data.title,content:t.data.body,category:t.data.category})}},{key:"render",value:function(){var e=this,t=this.props.categories;return r.a.createElement("div",{className:"post-form"},r.a.createElement(v.j,{onSubmit:this.onFormSubmit},r.a.createElement(v.k,{tag:"fieldset"},r.a.createElement(v.k,null,r.a.createElement(v.n,{for:"postTitle"},"Title"),r.a.createElement(v.l,{type:"text",name:"postTitle",id:"postTitle",required:!0,onChange:function(t){return e.handleInputChange("title",t.target.value)},value:this.state.title})),r.a.createElement(v.k,null,r.a.createElement(v.n,{for:"postCategory"},"Category ",this.state.category),r.a.createElement(v.l,{type:"select",name:"postCategory",id:"postCategory",required:!0,onChange:function(t){return e.handleInputChange("category",t.target.value)},value:this.state.category},!0===t.loading&&r.a.createElement("option",{value:""},"Loading..."),!1===t.loading&&t.list.map(function(e){return r.a.createElement("option",{value:e.path,key:e.path},e.name.charAt(0).toUpperCase()+e.name.slice(1))}))),r.a.createElement(v.k,null,r.a.createElement(v.n,{for:"postContent"},"Post content"),r.a.createElement(v.l,{type:"textarea",maxLength:"500",required:!0,name:"postContent",id:"postContent",rows:4,onChange:function(t){return e.handleInputChange("content",t.target.value)},"aria-multiline":"true",value:this.state.content})),r.a.createElement(v.k,{check:!0,inline:!0},r.a.createElement(v.d,{color:"success"},r.a.createElement(y.m,null)," Publish post")))))}}]),t}(a.Component);var Je=Object(g.a)(Object(l.b)(function(e,t){return{categories:e.categories,post:e.post}})(_e)),Ye=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={pageTitle:"New Post",postId:null},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){if("/:categoryName/:postId/edit"===this.props.match.path&&2===Object.keys(this.props.match.params).length){var e=this.props.match.params.postId||0;this.setState({postId:e,pageTitle:"Edit Post"})}}},{key:"goToHome",value:function(e){e.preventDefault(),this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=this.state,n=t.pageTitle,a=t.postId;return r.a.createElement("div",{className:"store-post"},r.a.createElement(S,null),r.a.createElement("div",{className:"container"},r.a.createElement(v.b,{tag:"nav",listTag:"div"},r.a.createElement(v.c,{tag:"a",href:"/"},"Home"),r.a.createElement(v.c,{active:!0},n)),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},null!==a?r.a.createElement(Je,{postId:a}):r.a.createElement(Je,null)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement(ae,null),r.a.createElement(se,null),r.a.createElement("hr",null),r.a.createElement(v.d,{color:"warning",size:"sm",block:!0,onClick:function(t){return e.goToHome(t)}},r.a.createElement(y.d,null)," Home"))))))}}]),t}(a.Component),He=Object(g.a)(Ye),Re={loading:!0,list:[]},Le={loading:!0,list:[]},ze={loading:!0,post:{}},Be=n(38),qe={loading:!0,list:[]},We=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return t.user;default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!1,list:t.categories};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:switch(t.sortType){case"DATE":return{loading:!1,list:t.posts.sort(function(e,n){return"ASC"===t.sortOrder?e.timestamp-n.timestamp:n.timestamp-e.timestamp}).filter(function(e){return e.title.toUpperCase().includes(t.searchTerm.toUpperCase())})};case"VOTES":return{loading:!1,list:t.posts.sort(function(e,n){return"ASC"===t.sortOrder?e.voteScore-n.voteScore:n.voteScore-e.voteScore}).filter(function(e){return e.title.toUpperCase().includes(t.searchTerm.toUpperCase())})};default:return t.posts}case L:case z:return{loading:!1,list:e.list.map(function(e,n){return e.id===t.post.id?t.post:e})};default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return{loading:!1,data:t.post};case Ee:case fe:return{loading:!1,data:t.data};case ge:case ve:return{loading:!1,data:t.post};default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return{loading:!1,list:t.comments};case Ne:case Te:return{loading:!1,list:e.list.map(function(e,n){return e.id===t.comment.id?t.comment:e})};case we:return{loading:!1,list:Object(Be.a)(e.list).concat([t.comment])};default:return e}}}),Fe=n(37),Ge=function(e){return function(t){return function(n){console.group(n.type),console.log("Current action: ",n);var a=t(n);return console.log("New state: ",e.getState()),console.groupEnd(),t(a)}}},Ke=Object(s.a)(Fe.a,Ge),Qe=Object(s.d)(We,Ke);c.a.render(r.a.createElement(l.a,{store:Qe},r.a.createElement(i.a,{basename:"/readable"},r.a.createElement(u.a,null,r.a.createElement(m.a,{path:"/",exact:!0,component:ie}),r.a.createElement(m.a,{path:"/new-post",component:He}),r.a.createElement(m.a,{path:"/:categoryName",exact:!0,component:he}),r.a.createElement(m.a,{path:"/:categoryName/:postId",exact:!0,component:Ue}),r.a.createElement(m.a,{path:"/:categoryName/:postId/edit",exact:!0,component:He})))),document.getElementById("root"))}},[[39,2,1]]]);
//# sourceMappingURL=main.7967ad99.chunk.js.map